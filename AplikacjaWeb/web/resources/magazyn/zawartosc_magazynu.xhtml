<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="/resources/templates/template.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
                xmlns:search="http://xmlns.jcp.org/jsf/composite/search">

    <ui:define name="title">
        <c:if test="#{menadzer_uzytkownikow.redirectTest()}"/>
        #{txtBundle['slist.title']}
    </ui:define>

    <ui:define name="left">
        <search:sform filtrujAction="#{menadzer_magazynu.filtruj}"
                      resetujAction="#{menadzer_magazynu.resetuj}"
                      serchInText="#{txtBundle['plist.column.partname']}"
                      nazwa_s="#{menadzer_magazynu.nazwa_s}"/>
    </ui:define>

    <ui:define name="content">
        <h:form id="main_list">
            <c:set var="lista" value="#{menadzer_magazynu.getLista()}"/>
            <h:panelGroup layout="block" rendered="#{!menadzer_magazynu.czyRenderowacTabele()}">
                <br/>
                <h:outputText class="alert alert-warning rounded" escape="false" value="#{txtBundle['slist.empty']}"/>
                <br/><br/>
            </h:panelGroup>
            <h:panelGroup rendered="#{menadzer_magazynu.czyRenderowacTabele()}" >
                <h:panelGroup layout="block" class="btn-group justify-content-end">
                    <h:commandButton class="btn btn-secondary" a:href="#" value="&lt;&lt;" rendered="#{menadzer_magazynu.doRenderowania(0)}">
                        <f:ajax event="click" render="main_list" listener="#{menadzer_magazynu.firstPage()}"/>
                    </h:commandButton>
                    <h:commandButton class="btn btn-secondary" a:href="#" value="&lt;" rendered="#{menadzer_magazynu.doRenderowania(1)}">
                        <f:ajax event="click" render="main_list" listener="#{menadzer_magazynu.previousPage()}"/>
                    </h:commandButton>
                    <h:commandButton class="btn btn-secondary #{menadzer_magazynu.czyWylaczony(menadzer_magazynu.getControlArrayItem(0))}" a:href="#" value="#{menadzer_magazynu.getControlArrayItem(0)}" rendered="#{menadzer_magazynu.doRenderowania(2)}">
                        <f:ajax event="click" render="main_list" listener="#{menadzer_magazynu.setPage(menadzer_magazynu.getControlArrayItem(0))}"/>
                    </h:commandButton>
                    <h:commandButton class="btn btn-secondary #{menadzer_magazynu.czyWylaczony(menadzer_magazynu.getControlArrayItem(1))}" a:href="#" value="#{menadzer_magazynu.getControlArrayItem(1)}" rendered="#{menadzer_magazynu.doRenderowania(3)}">
                        <f:ajax event="click" render="main_list" listener="#{menadzer_magazynu.setPage(menadzer_magazynu.getControlArrayItem(1))}"/>
                    </h:commandButton>
                    <h:commandButton class="btn btn-secondary #{menadzer_magazynu.czyWylaczony(menadzer_magazynu.getControlArrayItem(2))}" a:href="#" value="#{menadzer_magazynu.getControlArrayItem(2)}" rendered="#{menadzer_magazynu.doRenderowania(4)}">
                        <f:ajax event="click" render="main_list" listener="#{menadzer_magazynu.setPage(menadzer_magazynu.getControlArrayItem(2))}"/>
                    </h:commandButton>
                    <h:commandButton class="btn btn-secondary #{menadzer_magazynu.czyWylaczony(menadzer_magazynu.getControlArrayItem(3))}" a:href="#" value="#{menadzer_magazynu.getControlArrayItem(3)}" rendered="#{menadzer_magazynu.doRenderowania(5)}">
                        <f:ajax event="click" render="main_list" listener="#{menadzer_magazynu.setPage(menadzer_magazynu.getControlArrayItem(3))}"/>
                    </h:commandButton>
                    <h:commandButton class="btn btn-secondary #{menadzer_magazynu.czyWylaczony(menadzer_magazynu.getControlArrayItem(4))}" a:href="#" value="#{menadzer_magazynu.getControlArrayItem(4)}" rendered="#{menadzer_magazynu.doRenderowania(6)}">
                        <f:ajax event="click" render="main_list" listener="#{menadzer_magazynu.setPage(menadzer_magazynu.getControlArrayItem(4))}"/>
                    </h:commandButton>
                    <h:commandButton class="btn btn-secondary #{menadzer_magazynu.czyWylaczony(menadzer_magazynu.getControlArrayItem(5))}" a:href="#" value="#{menadzer_magazynu.getControlArrayItem(5)}" rendered="#{menadzer_magazynu.doRenderowania(7)}">
                        <f:ajax event="click" render="main_list" listener="#{menadzer_magazynu.setPage(menadzer_magazynu.getControlArrayItem(5))}"/>
                    </h:commandButton>
                    <h:commandButton class="btn btn-secondary #{menadzer_magazynu.czyWylaczony(menadzer_magazynu.getControlArrayItem(6))}" a:href="#" value="#{menadzer_magazynu.getControlArrayItem(6)}" rendered="#{menadzer_magazynu.doRenderowania(8)}">
                        <f:ajax event="click" render="main_list" listener="#{menadzer_magazynu.setPage(menadzer_magazynu.getControlArrayItem(6))}"/>
                    </h:commandButton>
                    <h:commandButton class="btn btn-secondary #{menadzer_magazynu.czyWylaczony(menadzer_magazynu.getControlArrayItem(7))}" a:href="#" value="#{menadzer_magazynu.getControlArrayItem(7)}" rendered="#{menadzer_magazynu.doRenderowania(9)}">
                        <f:ajax event="click" render="main_list" listener="#{menadzer_magazynu.setPage(menadzer_magazynu.getControlArrayItem(7))}"/>
                    </h:commandButton>
                    <h:commandButton class="btn btn-secondary #{menadzer_magazynu.czyWylaczony(menadzer_magazynu.getControlArrayItem(8))}" a:href="#" value="#{menadzer_magazynu.getControlArrayItem(8)}" rendered="#{menadzer_magazynu.doRenderowania(10)}">
                        <f:ajax event="click" render="main_list" listener="#{menadzer_magazynu.setPage(menadzer_magazynu.getControlArrayItem(8))}"/>
                    </h:commandButton>
                    <h:commandButton class="btn btn-secondary" a:href="#" value="&gt;" rendered="#{menadzer_magazynu.doRenderowania(12)}">
                        <f:ajax event="click" render="main_list" listener="#{menadzer_magazynu.nextPage()}"/>
                    </h:commandButton>
                    <h:commandButton class="btn btn-secondary" a:href="#" value="&gt;&gt;" rendered="#{menadzer_magazynu.doRenderowania(13)}">
                        <f:ajax event="click" render="main_list" listener="#{menadzer_magazynu.lastPage()}"/>
                    </h:commandButton>
                </h:panelGroup>
                <!-- LISTA UŻYTKOWNIKÓW -->
                <h:dataTable class="custom_table table table-hover" var="czesc" rules="all"
                             value="#{menadzer_magazynu.lista}" style="border-bottom: 2px solid #003366; border-top: 2px solid #003366;"
                             headerClass="align-middle text-center"
                             columnClasses="align-middle text-center,align-middle,align-middle,align-middle,align-middle text-center,align-middle text-center,align-middle text-center,align-middle,align-middle,align-middle,align-middle text-center">
                    <h:column> 
                        <f:facet name="header">
                            <h:outputText value="#{txtBundle['slist.column.id']}"/>
                        </f:facet>
                        <h:outputText value="#{czesc.id}"/>
                    </h:column>
                    <h:column> 
                        <f:facet name="header">
                            <h:outputText value="#{txtBundle['plist.column.partname']}"/>
                        </f:facet>
                        <h:outputText value="#{czesc.czesc.nazwa}"/>
                    </h:column>
                    <h:column> 
                        <f:facet name="header">
                            <h:outputText value="#{txtBundle['plist.column.model']}"/>
                        </f:facet>
                        <h:outputText value="#{czesc.czesc.model}"/>
                    </h:column>
                    <h:column> 
                        <f:facet name="header">
                            <h:outputText value="#{txtBundle['plist.column.producent']}"/>
                        </f:facet>
                        <h:outputText value="#{czesc.czesc.producent}"/>
                    </h:column>
                    <h:column> 
                        <f:facet name="header">
                            <h:outputText value="#{txtBundle['slist.column.stillage']}"/>
                        </f:facet>
                        <h:outputText value="#{czesc.regal}"/>
                    </h:column>
                    <h:column> 
                        <f:facet name="header">
                            <h:outputText value="#{txtBundle['slist.column.shelf']}"/>
                        </f:facet>
                        <h:outputText value="#{czesc.polka}"/>
                    </h:column>
                    <h:column> 
                        <f:facet name="header">
                            <h:outputText value="#{txtBundle['slist.column.quantity']}"/>
                        </f:facet>
                        <h:outputText value="#{czesc.ilosc}"/>
                    </h:column>
                    <h:column> 
                        <f:facet name="header">
                            <h:outputText value="#{txtBundle['plist.column.unit']}"/>
                        </f:facet>
                        <h:outputText value="#{czesc.czesc.jednostka}"/>
                    </h:column>
                    <h:column> 
                        <f:facet name="header">
                            <h:outputText value="#{txtBundle['plist.column.unit_value']}"/>
                        </f:facet>
                        <h:outputText value="#{czesc.czesc.cena_jednostkowa}">
                            <f:convertNumber pattern="#0.00 ¤"/>
                        </h:outputText>
                    </h:column>
                    <h:column> 
                        <f:facet name="header">
                            <h:outputText value="#{txtBundle['slist.column.total_value']}"/>
                        </f:facet>
                        <h:outputText value="#{menadzer_magazynu.getWartosc(czesc.czesc.cena_jednostkowa, czesc.ilosc)}">
                            <f:convertNumber pattern="#0.00 ¤"/>
                        </h:outputText>
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="#{txtBundle['column.actions']}"/>
                        </f:facet>
                        <h:panelGroup layout="block" class="btn-group" a:role="group">
                            <h:commandButton class="btn btn-info btn-sm rounded" 
                                             value="#{txtBundle['action.release']}" action="#{menadzer_magazynu.wydaj(czesc)}"/>
                            <h:commandButton class="btn btn-warning btn-sm rounded" 
                                             value="#{txtBundle['action.modify']}" action="#{menadzer_magazynu.dodajCzyEdytuj(1,czesc)}"/>
                            <h:commandButton class="btn btn-danger btn-sm rounded" value="#{txtBundle['action.delete']}" 
                                             onclick="if (!confirm('#{txtBundle['action.delete.confirmation']}'))
                                                         return false"
                                             action="#{menadzer_magazynu.usun(czesc)}"/>
                        </h:panelGroup>
                    </h:column>
                </h:dataTable>
            </h:panelGroup>
            <h:commandButton class="btn btn-primary" a:href="#" value="#{txtBundle['action.refresh']}">
                <f:ajax event="click" render="main_list" listener="#{menadzer_magazynu.refresh()}"/>
            </h:commandButton>
            <h:panelGroup layout="block" rendered="#{not empty facesContext.messageList}">
                <br /><br />
                <h:messages id="messagePanel" globalOnly="true" class="bg-info text-white rounded" style="font-size: 12px;"/>
            </h:panelGroup>
        </h:form>
    </ui:define>
</ui:composition>
